{"is_source_file": true, "format": "TypeScript", "description": "This file defines a DataService class providing methods to manage notes, including listing, creating, updating, and deleting notes. It supports both API-based and localStorage fallback storage mechanisms. It also defines a Note type used across the project.", "external_files": ["fetch API (built-in)", "localStorage (browser API)"], "external_methods": ["fetch", "crypto.randomUUID", "localStorage.getItem", "localStorage.setItem"], "published": ["Note", "DataService"], "classes": [{"name": "DataService", "description": "A class that provides methods for CRUD operations on notes, supporting API calls and localStorage fallback."}], "methods": [{"name": "list", "description": "Returns a promise resolving to an array of notes, fetched via API if available, or via localStorage fallback."}, {"name": "create", "description": "Creates a new note, either through API or localStorage fallback, returning the created note."}, {"name": "update", "description": "Updates a note by ID, via API or localStorage fallback, returning the updated note."}, {"name": "remove", "description": "Removes a note by ID, supporting both API and localStorage fallback, returning a boolean result."}, {"name": "_lsReadAll", "description": "Reads all notes from localStorage."}, {"name": "_lsWriteAll", "description": "Writes the list of notes to localStorage."}, {"name": "_lsList", "description": "Returns a Promise resolving to all localStorage notes."}, {"name": "_lsCreate", "description": "Creates a note in localStorage with generated ID and timestamps."}, {"name": "_lsUpdate", "description": "Updates a note in localStorage, matching by ID."}, {"name": "_lsRemove", "description": "Removes a note from localStorage by ID."}], "calls": ["fetch", "JSON.stringify", "JSON.parse", "localStorage.getItem", "localStorage.setItem", "crypto.randomUUID"], "search-terms": ["DataService", "note management", "localStorage fallback", "API integration", "TypeScript notes"], "state": 2, "file_id": 7, "knowledge_revision": 15, "git_revision": "", "ctags": [{"_type": "tag", "name": "DataService", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^export class DataService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^    const idx = list.findIndex(n => n.id === id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^    const item: Note = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^    const list = this._lsReadAll().filter(n => n.id !== id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^    const list = this._lsReadAll();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^    const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^    const raw = localStorage.getItem(this.storageKey);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^        const res = await fetch(this.apiBase + '\\/notes', { credentials: 'include' });$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^      const res = await fetch(`${this.apiBase}\\/notes\\/${encodeURIComponent(id)}`, {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/simple-notes-app-39184-39218/notes_frontend/src/lib/dataService.ts", "pattern": "/^      const res = await fetch(this.apiBase + '\\/notes', {$/", "language": "TypeScript", "kind": "constant"}], "hash": "f235adb0c7d0fd070e6b3043968c0d18", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/dataService.ts", "revision_history": [{"15": ""}]}